<%- include("../partials/header") %>
<div class="container-fluid p-3">
    <% if(data.length>0){ %> 
        <table class="table table-striped">
            <thead class="table-dark">
              <tr>
                <th scope="col">#</th>
                <th scope="col">Poster</th>
                <th scope="col">Title</th>
                <th scope="col">Year</th>
                <th scope="col">Quality</th>
                <th scope="col">Created On</th>
                <th scope="col">Action</th>
              </tr>
            </thead>
            <tbody>
              <% for(let m of data){ %> 
                <tr>
                    <th><%= m.id %> </th>
                    <td>
                      <div>
                        <style>
                          img{
                            width: auto;
                            height: 80px;
                            display: block;
                          }
                        </style>
                        <img data-src="<%= m.poster %>" alt="<%= m.title %> posters" class="mx-2" >
                    </div>
                    <td> <%= m.title %></td>
                    </td>
                    <td><%= m.movie_year  %></td>
                    <td><%= m.quality ? m.quality : 'null' %></td>
                    <td><%= moment(m.createdAt) %></td>
                    <td>
                      <a href="/admin/edit-movie?id=<%= m.id %>" class="btn btn-sm btn-warning">Edit</a>
                      <a href="/admin/delete-movie?id=<%= m.id %>" onclick="return confirm('Are you sure to Delete?')"class="btn btn-sm btn-danger">Delete</a>
                    </td>
                </tr>
              <% } %> 
            </tbody>
          </table>

          <div class="d-flex justify-content-center py-5">
            <nav aria-label="...">
                <ul class="pagination">
                  <li class="page-item <%= currentPage === 1 ? 'disabled' : '' %>"  >
                    <a  href="/admin/update-movie?page=<%=currentPage-1 %>" class="page-link" >Previous</a>
                  </li>
                  <% for(let i=0; i< totalPage; i++) {%> 
                    <li class="page-item  <%= currentPage == i+1 ? "active" : "" %> "><a class="page-link" href="/admin/update-movie?page=<%=i+1 %> "><%= i+1 %> </a></li>
                  <% }%> 
                  <li class="page-item <%= currentPage >= totalPage ? 'disabled' : '' %>"  >
                    <a class="page-link" href="/admin/update-movie?page=<%=currentPage+1 %>">Next</a>
                  </li>
                </ul>
              </nav>
          </div>

    <% }else{ %>
        <h3 class="text-center">No data</h3> 
    <% } %> 
</div>
    <%- include("../partials/footer") %>